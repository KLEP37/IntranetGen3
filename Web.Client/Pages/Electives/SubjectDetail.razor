@attribute [Route(Routes.Electives.SubjectDetail)]

@if (subject is not null)
{
    <div class="row">
        <div class="col">
            <h1>@subject.Name</h1>
        </div>

        <AuthorizeView Roles="@($"{nameof(Role.Administrator)}, {nameof(Role.Teacher)}")">
            <div class="col text-end">
                <HxButton Color="ThemeColor.Secondary" OnClick="HandleEditClick" CssClass="mb-4">Editovat definici předmětu</HxButton>
            </div>
        </AuthorizeView>
    </div>


    <HxCard CssClass="mb-4">
        <HeaderTemplate>
            <HxCardTitle>Popis</HxCardTitle>
        </HeaderTemplate>
        <BodyTemplate>
            <HxCardText>@subject.Description.WithNewLinesAsHtmlBreak()</HxCardText>
        </BodyTemplate>
    </HxCard>

    <HxCard CssClass="mb-4">
        <HeaderTemplate>
            <HxCardTitle>Základní údaje</HxCardTitle>
        </HeaderTemplate>
        <BodyTemplate>
            <HxCardText>
                <TextValue Label="Učitel(é)" Value="@GetTeachers(subject.TeacherIds)" />
                <TextValue Label="Rozvrh" Value="@ValueFormatter.GetScheduleTimeSlot(subject.ScheduleDayOfWeek, subject.ScheduleSlotInDay)" />
                <TextValue Label="Kapacita" Value="@subject.Capacity.ToString("n0")" />
                <TextValue Label="Ročník(y)" Value="@GetGrades(subject.GradeIds)" />
                <TextValue Label="Kategorie předmětu" Value="@SubjectCategoriesDataStore.GetByKey(subject.CategoryId.Value)?.Name" />
                <TextValue Label="Typ(y) předmětu" Value="@GetSubjectTypes(subject.SubjectTypeIds)" />
            </HxCardText>
        </BodyTemplate>
    </HxCard>

    <HxCard CssClass="mb-4">
        <HeaderTemplate>
            <HxCardTitle>Zapsaní studenti</HxCardTitle>
        </HeaderTemplate>
        <BodyTemplate>
            <StudentSubjectRegistrationsGrid DataProvider="GetStudentRegistrations" ShowSubjectColumn="false" />
        </BodyTemplate>
    </HxCard>

    <SubjectEdit @ref="subjectEditComponent" SubjectId="@SubjectId" OnSaved="HandleEditSaved" />
}
else
{
    <HxPlaceholderContainer Animation="PlaceholderAnimation.Glow">
        <h1><HxPlaceholder Columns="4" /></h1>

        <HxPlaceholderButton Color="ThemeColor.Secondary" />
    </HxPlaceholderContainer>
}
