<AuthorizeView Roles="@nameof(Role.Student)">
    <h5 class="mt-3">
        <text>Postup tvé registrace předmětů</text>
        @if (studentsProgress is not null && studentsProgress.IsRegistrationValid)
        {
            <b> - Máš splněné své registrace! 🥳</b>
        }
    </h5>
    @if (studentsProgress is not null) 
    {
        // Loaded, show data
        @if (studentsProgress.CanUseLanguageInsteadOfDonatedHours)
        {
            <p><b>Profesionální rada</b>: Tvůj ročník umožňuje zapsat druhý cizí jazyk namísto volitelného předmětu 😎</p>
        }

        <HxListGroup 
            CssClass='contained-width'>
            @if (!studentsProgress.CanUseLanguageInsteadOfDonatedHours)
            {
                // Cannot use language instead of donated hours (more common)

                <ElectiveProgressComponent
                    CriteriaName='Celkový počet hodin'
                    MeetsCriteria="@studentsProgress.MeetsDonatedHoursCriteria"
                    CompleteRegistrationIsValid='studentsProgress.IsRegistrationValid'
                    CriteriaProgress="@($"{studentsProgress.AmOfDonatedHoursExcludingLanguages}h / {studentsProgress.RequiredAmOfDonatedHoursExcludingLanguages}h")"
                    CriteriaDescription=@($"Musíš mít tolik předmětů (kromě jazyků), aby dohromady zabrali v rozvrhu {GetHoursWithGrammar(studentsProgress.RequiredAmOfDonatedHoursExcludingLanguages)}")/>

                @if (studentsProgress.IsLanguageRequired)
                {
                    <ElectiveProgressComponent
                        CriteriaName='Druhý cizí jazyk'
                        MeetsCriteria="@studentsProgress.MeetsLanguageCriteria"
                        CompleteRegistrationIsValid='studentsProgress.IsRegistrationValid'
                        CriteriaProgress="@(studentsProgress.HasRegisteredLanguage ? "Splněno - Máš zapsaný jazyk" : "Chybí - Potřebuješ zapsat jazyk")"
                        CriteriaDescription="Musíš mít zapsaný cizí jazyk"/>
                }
            }
            else
            {
                // Can use language instead of donated hours

                <ElectiveProgressComponent
                    CriteriaName='Celkový počet hodin'
                    MeetsCriteria="@studentsProgress.MeetsDonatedHoursCriteria"
                    CompleteRegistrationIsValid='studentsProgress.IsRegistrationValid'
                    CriteriaProgress="@($"{studentsProgress.AmOfDonatedHoursExcludingLanguages}h / {studentsProgress.RequiredAmOfDonatedHoursExcludingLanguages}h")"
                    CriteriaDescription=@($"Musíš mít tolik předmětů (kromě jazyků), aby dohromady zabrali v rozvrhu {GetHoursWithGrammar(studentsProgress.RequiredAmOfDonatedHoursExcludingLanguages)}")/>
                <HxListGroupItem> Nebo </HxListGroupItem>
                <ElectiveProgressComponent
                    CriteriaName='Druhý cizí jazyk'
                    MeetsCriteria="@studentsProgress.MeetsLanguageCriteria"
                    CompleteRegistrationIsValid='studentsProgress.IsRegistrationValid'
                    CriteriaProgress="@(studentsProgress.HasRegisteredLanguage ? "Splněno - Máš zapsaný jazyk" : "Chybí - Potřebuješ zapsat jazyk")"
                    CriteriaDescription="Musíš mít zapsaný cizí jazyk"/>
            }

            @if (studentsProgress.RequiresCspOrCpValidation)
            {
                <ElectiveProgressComponent
                    CriteriaName='Člověk & svět práce nebo Člověk & příroda'
                    MeetsCriteria="@studentsProgress.MeetsCsOrCpCriteria"
                    CompleteRegistrationIsValid='studentsProgress.IsRegistrationValid'
                    CriteriaProgress="@($"{studentsProgress.AmOfDonatedHoursInCspOrCp}h / {studentsProgress.RequiredAmOfDonatedHoursInCspOrCp}h")"
                    CriteriaDescription=@($"Alespoň {GetHoursWithGrammar(studentsProgress.RequiredAmOfDonatedHoursInCspOrCp)} musí být ze vzdělávacích oblastí „Člověk aspolečnost“ či „Člověk a příroda“")/>
            }
        </HxListGroup>
    }
    else
    {
        // Not loaded, show placeholder

        <b>Načítání postupu</b>
        <HxSpinner Color="ThemeColor.Primary" Size="SpinnerSize.Small" />
    }
</AuthorizeView>
